<!DOCTYPE html>
<html>
<head>
  <title>search posts</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>

  
<h1>search my posts</h1>

<input type="text" id="search-box" placeholder="type something to search...">

<div id="search-results">
  <p>type in the box above to search for posts</p>
</div>

<script>
// this gets all the posts from ghost as json data
var allPosts = [{"id":"691a0dbac7f95e00018f1a52","uuid":"c089e74f-6942-44b3-ad77-87bd14f803ba","title":"Test Blog","slug":"test-blog","html":"<p>Im testing with this</p>","comment_id":"691a0dbac7f95e00018f1a52","feature_image":null,"featured":false,"visibility":"public","created_at":"2025-11-16T17:45:30.000+00:00","updated_at":"2025-11-16T17:45:41.000+00:00","published_at":"2025-11-16T17:45:41.000+00:00","custom_excerpt":null,"codeinjection_head":null,"codeinjection_foot":null,"custom_template":null,"canonical_url":null,"url":"http://localhost:2368/test-blog/","excerpt":"Im testing with this","reading_time":0,"access":true,"comments":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"email_subject":null,"frontmatter":null,"feature_image_alt":null,"feature_image_caption":null},{"id":"691a0c8fc7f95e00018f1a34","uuid":"49d425a4-8344-45ea-9040-02abc8c1db2c","title":"What if life?","slug":"what-if-life","html":"<p>Its great?!</p>","comment_id":"691a0c8fc7f95e00018f1a34","feature_image":null,"featured":false,"visibility":"public","created_at":"2025-11-16T17:40:31.000+00:00","updated_at":"2025-11-16T17:40:38.000+00:00","published_at":"2025-11-16T17:40:38.000+00:00","custom_excerpt":null,"codeinjection_head":null,"codeinjection_foot":null,"custom_template":null,"canonical_url":null,"url":"http://localhost:2368/what-if-life/","excerpt":"Its great?!","reading_time":0,"access":true,"comments":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"email_subject":null,"frontmatter":null,"feature_image_alt":null,"feature_image_caption":null},{"id":"691a0c7bc7f95e00018f1a2c","uuid":"d2e3e581-e86c-4704-9484-1012556770c6","title":"Hedonism","slug":"hedonism","html":"<p>Very, very bad.</p>","comment_id":"691a0c7bc7f95e00018f1a2c","feature_image":null,"featured":false,"visibility":"public","created_at":"2025-11-16T17:40:11.000+00:00","updated_at":"2025-11-16T17:40:22.000+00:00","published_at":"2025-11-16T17:40:22.000+00:00","custom_excerpt":null,"codeinjection_head":null,"codeinjection_foot":null,"custom_template":null,"canonical_url":null,"url":"http://localhost:2368/hedonism/","excerpt":"Very, very bad.","reading_time":0,"access":true,"comments":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"email_subject":null,"frontmatter":null,"feature_image_alt":null,"feature_image_caption":null},{"id":"691a0c6ac7f95e00018f1a24","uuid":"08112430-042f-4d4a-b5db-df2a0da9f1a1","title":"Stoicism","slug":"stoicism","html":"<p>Im a stoic.</p>","comment_id":"691a0c6ac7f95e00018f1a24","feature_image":null,"featured":false,"visibility":"public","created_at":"2025-11-16T17:39:54.000+00:00","updated_at":"2025-11-16T17:40:02.000+00:00","published_at":"2025-11-16T17:40:02.000+00:00","custom_excerpt":null,"codeinjection_head":null,"codeinjection_foot":null,"custom_template":null,"canonical_url":null,"url":"http://localhost:2368/stoicism/","excerpt":"Im a stoic.","reading_time":0,"access":true,"comments":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"email_subject":null,"frontmatter":null,"feature_image_alt":null,"feature_image_caption":null}];

// this gets the search box where people type
var searchBox = document.getElementById('search-box');

// this gets the area where we show results
var resultsArea = document.getElementById('search-results');

// this runs every time someone types in the search box
searchBox.addEventListener('input', function() {

  // get what the person typed and make it lowercase
  var whatTheyTyped = searchBox.value.toLowerCase();

  // if they didnt type anything show a message
  if (whatTheyTyped === '') {
    resultsArea.innerHTML = '<p>type in the box above to search for posts</p>';
    return;
  }

  // make an empty list to store posts that match
  var postsWeFound = [];

  // go through each post one by one
  for (var i = 0; i < allPosts.length; i++) {
    var currentPost = allPosts[i];

    // get the title and make it lowercase
    var postTitle = currentPost.title.toLowerCase();

   
    var postExcerpt = '';
    if (currentPost.excerpt) {
      postExcerpt = currentPost.excerpt.toLowerCase();
    }

    // get the content and make it lowercase
    var postContent = '';
    if (currentPost.html) {
      postContent = currentPost.html.toLowerCase();
    }

    // check if what they typed is in the title
    var foundInTitle = postTitle.indexOf(whatTheyTyped) !== -1;


    var foundInExcerpt = postExcerpt.indexOf(whatTheyTyped) !== -1;

    // check if what they typed is in the content
    var foundInContent = postContent.indexOf(whatTheyTyped) !== -1;

    // if we found it in any of those places add it to our list
    if (foundInTitle || foundInExcerpt || foundInContent) {
      postsWeFound.push(currentPost);
    }
  }

  // now show the results
  if (postsWeFound.length === 0) {
    // we didnt find anything
    resultsArea.innerHTML = '<p>no posts found matching "' + whatTheyTyped + '"</p>';
  } else {
    // we found some posts so show them
    var htmlToShow = '<h2>found ' + postsWeFound.length + ' post(s)</h2><ul>';

    for (var j = 0; j < postsWeFound.length; j++) {
      var post = postsWeFound[j];
      htmlToShow += '<li>';
      htmlToShow += '<a href="/posts/' + post.slug + '/">' + post.title + '</a>';
      htmlToShow += '<p>' + (post.excerpt || '') + '</p>';
      htmlToShow += '</li>';
    }

    htmlToShow += '</ul>';
    resultsArea.innerHTML = htmlToShow;
  }
});
</script>


</body>
</html>
