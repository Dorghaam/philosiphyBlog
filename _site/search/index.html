<!DOCTYPE html>
<html>
<head>
  <title>search posts</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>

  
<h1>search my posts</h1>

<input type="text" id="search-box" placeholder="type something to search...">

<div id="search-results">
  <p>type in the box above to search for posts</p>
</div>

<script>
// this gets all the posts from ghost as json data
var allPosts = [{"id":"6919feb5dc974b38d3f323b5","uuid":"b4beb3cf-f685-425c-8e36-e6599f33d7b4","title":"Test Post","slug":"test-post","html":"<p>Hello im writing this as a test post to connect to blog. </p>","comment_id":"6919feb5dc974b38d3f323b5","feature_image":null,"featured":false,"visibility":"public","created_at":"2025-11-16T16:41:25.000+00:00","updated_at":"2025-11-16T16:41:38.000+00:00","published_at":"2025-11-16T16:41:38.000+00:00","custom_excerpt":null,"codeinjection_head":null,"codeinjection_foot":null,"custom_template":null,"canonical_url":null,"url":"http://localhost:2368/test-post/","excerpt":"Hello im writing this as a test post to connect to blog.","reading_time":0,"access":true,"comments":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"email_subject":null,"frontmatter":null,"feature_image_alt":null,"feature_image_caption":null},{"id":"6919fb39dc974b38d3f3239c","uuid":"484c5d8a-22a7-4887-b83b-e04878bb2759","title":"What is Life?","slug":"what-is-life","html":"<p>\"The purpose of life, after all, is to live it, to taste experience to the utmost, to reach out eagerly and without fear for newer and richer experience.\" - Eleanor Roosevelt&nbsp;</p>","comment_id":"6919fb39dc974b38d3f3239c","feature_image":null,"featured":false,"visibility":"public","created_at":"2025-11-16T16:26:33.000+00:00","updated_at":"2025-11-16T16:27:03.000+00:00","published_at":"2025-11-16T16:27:03.000+00:00","custom_excerpt":null,"codeinjection_head":null,"codeinjection_foot":null,"custom_template":null,"canonical_url":null,"url":"http://localhost:2368/what-is-life/","excerpt":"\"The purpose of life, after all, is to live it, to taste experience to the utmost, to reach out eagerly and without fear for newer and richer experience.\" - Eleanor Roosevelt ","reading_time":0,"access":true,"comments":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"email_subject":null,"frontmatter":null,"feature_image_alt":null,"feature_image_caption":null},{"id":"6919fb06dc974b38d3f32392","uuid":"f4e56c88-01b9-43ae-b496-350877f265a1","title":"Hedonism","slug":"hedonism","html":"<p>\"To me, beauty is the wonder of wonders. It is only shallow people who do not judge by appearances. The true mystery of the world is the visible, not the invisible... A new Hedonism, that is what our century wants.\"</p>","comment_id":"6919fb06dc974b38d3f32392","feature_image":null,"featured":false,"visibility":"public","created_at":"2025-11-16T16:25:42.000+00:00","updated_at":"2025-11-16T16:26:20.000+00:00","published_at":"2025-11-16T16:26:20.000+00:00","custom_excerpt":null,"codeinjection_head":null,"codeinjection_foot":null,"custom_template":null,"canonical_url":null,"url":"http://localhost:2368/hedonism/","excerpt":"\"To me, beauty is the wonder of wonders. It is only shallow people who do not judge by appearances. The true mystery of the world is the visible, not the invisible... A new Hedonism, that is what our century wants.\"","reading_time":0,"access":true,"comments":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"email_subject":null,"frontmatter":null,"feature_image_alt":null,"feature_image_caption":null},{"id":"6919fab8dc974b38d3f3238a","uuid":"1e13cb0d-453f-41c9-83ff-d3e749092836","title":"Stoicism","slug":"stoicism","html":"<p>\"If you are distressed by anything external, the pain is not due to the thing itself, but to your estimate of it; and this you have the power to revoke at any moment\" — Marcus Aurelius</p>","comment_id":"6919fab8dc974b38d3f3238a","feature_image":null,"featured":false,"visibility":"public","created_at":"2025-11-16T16:24:24.000+00:00","updated_at":"2025-11-16T16:25:14.000+00:00","published_at":"2025-11-16T16:25:14.000+00:00","custom_excerpt":null,"codeinjection_head":null,"codeinjection_foot":null,"custom_template":null,"canonical_url":null,"url":"http://localhost:2368/stoicism/","excerpt":"\"If you are distressed by anything external, the pain is not due to the thing itself, but to your estimate of it; and this you have the power to revoke at any moment\" — Marcus Aurelius","reading_time":0,"access":true,"comments":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"email_subject":null,"frontmatter":null,"feature_image_alt":null,"feature_image_caption":null}];

// this gets the search box where people type
var searchBox = document.getElementById('search-box');

// this gets the area where we show results
var resultsArea = document.getElementById('search-results');

// this runs every time someone types in the search box
searchBox.addEventListener('input', function() {

  // get what the person typed and make it lowercase
  var whatTheyTyped = searchBox.value.toLowerCase();

  // if they didnt type anything show a message
  if (whatTheyTyped === '') {
    resultsArea.innerHTML = '<p>type in the box above to search for posts</p>';
    return;
  }

  // make an empty list to store posts that match
  var postsWeFound = [];

  // go through each post one by one
  for (var i = 0; i < allPosts.length; i++) {
    var currentPost = allPosts[i];

    // get the title and make it lowercase
    var postTitle = currentPost.title.toLowerCase();

   
    var postExcerpt = '';
    if (currentPost.excerpt) {
      postExcerpt = currentPost.excerpt.toLowerCase();
    }

    // get the content and make it lowercase
    var postContent = '';
    if (currentPost.html) {
      postContent = currentPost.html.toLowerCase();
    }

    // check if what they typed is in the title
    var foundInTitle = postTitle.indexOf(whatTheyTyped) !== -1;


    var foundInExcerpt = postExcerpt.indexOf(whatTheyTyped) !== -1;

    // check if what they typed is in the content
    var foundInContent = postContent.indexOf(whatTheyTyped) !== -1;

    // if we found it in any of those places add it to our list
    if (foundInTitle || foundInExcerpt || foundInContent) {
      postsWeFound.push(currentPost);
    }
  }

  // now show the results
  if (postsWeFound.length === 0) {
    // we didnt find anything
    resultsArea.innerHTML = '<p>no posts found matching "' + whatTheyTyped + '"</p>';
  } else {
    // we found some posts so show them
    var htmlToShow = '<h2>found ' + postsWeFound.length + ' post(s)</h2><ul>';

    for (var j = 0; j < postsWeFound.length; j++) {
      var post = postsWeFound[j];
      htmlToShow += '<li>';
      htmlToShow += '<a href="/posts/' + post.slug + '/">' + post.title + '</a>';
      htmlToShow += '<p>' + (post.excerpt || '') + '</p>';
      htmlToShow += '</li>';
    }

    htmlToShow += '</ul>';
    resultsArea.innerHTML = htmlToShow;
  }
});
</script>


</body>
</html>
